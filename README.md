# CodeMapLibrary
Providing methods to gather Dependency-Relationship (PackageReference) among Projects (.Net Framework/.Net Core) on Git
Dependencies NOT include public packages, e.g. AWSSDK

Some methods using [GitLabApiClient](https://github.com/nmklotas/GitLabApiClient)

Methods including:

2 controllers provided example to display visualisation of package dependencies:
- chord-controller: shows dependencies among projects within one git group
- force-map-controller: shows package dependencies with one required project as center

### Library
Other function calls provided and their usage can be found in: TestsForCodeMapLibrary.cs

- PrintAllPackagesAsync():  find public packages used in github projects, can be used to generate known public packages
which are in this case hard-coded in Helper.IsKnownPublicPackage() , which should be pass from config

- UpdateCmdAsync(): update project's dependency relationship stored in aws dynamodb, should be called by CI when project been deployed

- PopulateDynamoDBAsync(): populate the dependency relationship data in aws dynamodb table, when the table is created and empty

### wwwroot storing necessary resource for results to show, including:
- /force.html: frontend html page, been returned by controller ForceMap and canbe accessed at /api/ForceMap/ProjectName,
including s3 code to generate forcelayout-map for projects and their dependencies, reading projectsRelationships.json as data source
d3 methods document can be found [on github](https://github.com/d3)

- projectsRelationships.json: storing downloaded dependencies about one project (in this example, CProject) from s3 bucket
- /chord.html: frontend html page, including s3 code to generate chord-map for projects in one git group, reading projects.csv (for projects) matrix.json (for relationships) as data source
- projects.csv: storing projects in one git group, originally negerated by Helper.GenerateProjectsCsv()
- matrix.json: storing dependency relationships of projects in one git group, originally generated by Helper.GenerateMatrixJson()


### Aws
Helper library responsible of interaction with AWS,
full library can be found in AwsCsLibrary


### Helper
functions responsible for e.g. 
- resource files generation
- helper functions to extract dependencies from .csproj file (.net framework/.net core) etc.



## Relationships stored in an AWS DynamoDB table with an automatic backup json file in S3 bucket
This operation has been completed in another aws lambda function

## Set in Environment variables:
- Keys and other related AWS parameters
- Git base service name and token (set up on Git) e.g.
- groups on Git


